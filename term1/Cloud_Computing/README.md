# Cloud Computing

## 프로젝트 설명
Cloud 기반의 비디오 및 스트림 Sync를 같은 room에 존재하는 유저들 모두에게 맞춰주는 웹어플리케이션입니다.  
간단한 사용법으로,  


 * 유저가 room을 만들고 Guests를 초대  
 * Master 권한을 가진 유저가 영상업로드 혹은 youtube link로 비디오 재생  
 * 같은 room에 있는 유저들 모두 비디오의 재생시간 혹은 일시정지상태 등 sync가 이루어짐  

Docker와 Kubernetes(k8s)를 오라클 클라우드 기반으로 하여 자동배포 및 스케일링 등에 강점을 얻었습니다.  
실로, 클라우드와 k8s 를 통해 얼마나 서버가 버틸수 있는지 서버단에서 테스트도 이루어졌습니다.  


k8s의 강점인 스케일링을 사용하지 않은 서버에선 34000명의 클라이언트 접속시 서버가 동작오류를 일으켰습니다.  
하지만 스케일링을 적용시 동시접속 60000명이 넘어도 latency가 조금은 증가할지라도 문제없이 동작하는것을 확인했습니다.  


## 주요 업무
이번 프로젝트에서 주요 업무로,  
 * 서버, 클라이언트간 API, 동작도 설계
 * Sync 알고리즘 리서치 및 실제 구현
 * 'Plyr' 미디어 플레이어 오픈소스를 프로젝트에 적용

## Sync 알고리즘 상세 설명  
처음엔 단순히 latency 값을 계산해 동기화하면 된다고 생각했습니다. 하지만 latency가 갑자기 길어지는 경우와 같이 다양한 네트워크 환경 속에서는 문제가 생깁니다. 따라서 단순히 RTT로 현재 latency 값을 구해 동기화하는 것은 무리가 있다고 판단했으며, 결정적으로 제가 생각해낸 방안은 단순 가설이므로 신뢰성이 전혀 없었습니다.  
  현재의 latency 측정 보다는 예측이 필요했기에 통신과 관련된 다양한 논문을 읽어봤습니다. 이를 통해 평상시와 불안한 네트워크 상황을 예측할 수 있도록 통계방식을 프로그램에 적용했습니다. Ping 데이터를 서버에 지속적으로 보내 응답으로 온 latency 값을 클라이언트가 축적하고, 네트워크 상황이 바뀌었을 때 신뢰구간인 2-sigma 값을 벗어나면 수식을 바꾸는 방식으로 구현했습니다. 예측 수식은 2가지 모드를 가지는 EWMA Filter를 적용했습니다. 결과적으로 오라클 클라우드 로드밸런서 부하테스트에도 응답 딜레이가 조금씩 길어지긴 하지만 동기화는 문제없이 동작하는 것을 확인했습니다.
 
## 사용 기술
Sync 알고리즘을 구현하기 위한 Javascript  
미디어 플레이어 오픈소스를 적용시키기 위한 'Plyr' 코드 리뷰 및 데이터 흐름 파악    
자동배포 및 관리를 위한 Docker, Kubernetes  
클라우드 베이스 Oracle Cloud

## 실제 프로젝트 링크
https://github.com/UoB-Cloud-Computing-2018-KLS/vchamber
